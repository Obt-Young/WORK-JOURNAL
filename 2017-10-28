1./proc/net/dev内容出错的问题




_____________________________________________________________________________________________
//2.c
//gcc 2.c -o test
//./test 采样间隔 >> test.log &
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
int main(int argc,char ** argv)
{
        char buff[4096];
        int fd;
        int nbytes;
        int s;
        s=atoi(argv[1]);
        while(1)
        {
                fd = open("/proc/net/dev",O_RDONLY);
                nbytes = read(fd,buff,4096);
                system("date");
                write(STDOUT_FILENO,buff,nbytes);
                fflush(stdout);
                close(fd);
                sleep(s);
        }

}
______________________________________________________________________________________________
#!/bin/sh
#Resolve.sh

APPENDIX=`date "+%Y-%m-%d-%H:%M:S"`
cp test.log ./result/tmplog.$APPENDIX;
cat ./result/tmplog.$APPENDIX|grep -i "eth4:"|awk -F ':' '{print $2}'>>./result/eth4.$APPENDIX;
cat ./result/tmplog.$APPENDIX|grep -i "eth5:"|awk -F ':' '{print $2}'>>./result/eth5.$APPENDIX;
______________________________________________________________________________________________
